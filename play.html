<!DOCTYPE html>
<html>
<head>
	<title>Trivia</title>
	<link href="style/style.css" rel="stylesheet" type="text/css" />
    <link href="style/circle.css" rel="stylesheet" />
	<script src="js/exit1.js"></script>
	<script src="js/core.js"></script>
	<script src="js/jquery-3.2.1.js"></script>
	<script src="js/webcam.min.js"></script>
	<script>
		$(document).ready(function(){
   			$("#myid").keyup(function(){
        			var currentText = $(this).val();
        			$("#player").text(currentText);
    			});
		});
    		$(document).ready(function(){
   			$("#mycur").keyup(function(){
        			var currentText = $(this).val();
        			$("#cursor").text(currentText);
    			});
		});
	</script>
	<script>
        canvas = document.getElementById("canvas");
        ctx = canvas.getContext("2d");
        function contador(){
            var pos=0;
            interval =  setInterval(function(){ 
				ctx.fillStyle="red";
                ctx.clearRect(0,0,1000,20);
                ctx.fillRect(pos,0,1000,20);
                pos++;
                if(pos>1000){
                    clearInterval(interval);
                    determinaResultado(false);
                    setTimeout(function(){
						clickEnParrafo();
                    },1000);
                } 
            },10);
        }
    </script>
	<script type="text/javascript">
    		function timerw(){
			var timeleft = 11;
    		var downloadTimer = setInterval(function(){
    			timeleft--;
  			document.getElementById("timerq").textContent = timeleft;
    			if(timeleft <= 0)
       				clearInterval(downloadTimer);
        			if(timeleft == 0){
					//se me buguio :´v
				}
    			},1000);
		}
	</script>
	<script>
            $(document).ready(function(){
                indice = 0;
                score=0;
				$("#game").hide();
		    		$("#final").hide();
//******************************************************
                $("#tituloPregunta").on("mouseover",function(){
                    $(this).css("background-color","#green");
                    $(this).css("cursor","pointer");
                });
                
                $("#tituloPregunta").on("mouseout",function(){
                    $(this).css("background-color","#green");
                });
                
 
        //*****************************************************************************
              
        
               $("#tituloPregunta").click(function(){
                   $(this).css("cursor","default");
                   $(this).css("background-color","#4caf50");
                   $("#tituloPregunta").off();
                   $("#pregunta").hide();
                  
                $("#panel").slideToggle(1000);  
                $("#iconoAnimado").fadeOut(2000);
                
                setTimeout(function(){
                    $("#pregunta").fadeIn(2000);
                    $("#textoTitulo").text("Iniciando...");
					$("#register").hide();
                    $("#game").fadeIn(2000);
					timerw();
                    $("#textoPregunta").text(datos[indice][0]);
                    $("#1").text(datos[indice][1]);
                    $("#2").text(datos[indice][2]);
                    $("#3").text(datos[indice][3]);
                    $("#4").text(datos[indice][4]);
                    $("#5").text(datos[indice][5]);
                    $("#6").text(datos[indice][6]);
                    contador();
                },1000);
            }); 
            
            $("p").click(function(){
               if(datos[indice][parseInt(event.target.id)] === datos[indice][7]) {
					score++;
					clearInterval(interval);
					timerw();
            determinaResultado(true);
        
               }
               else{
               
               clearInterval(interval);
               determinaResultado(false);
                
               }
               setTimeout(function(){
                   
                   clickEnParrafo();
               },1000);
               
            });
            
            
//******************************************************************************** 
         		var pregunta1=["Cual de estas organizaciones internacionales ayudan a crear una sociedad mejor y mas justa?", "FIDH", "BRIGADAS INTERNACIONALES DE PAZ", "OIM", "CEJIL", "Todas las anteriores", "Ninguna de las anteriores", "Todas las anteriores"];
			var pregunta2=["Cual es el idioma mayormente utilizado en cuanto a cantidad de paises se trata?", "Chino mandarin", "Ingles", "Frances", "Español", "Portugues", "Ruso", "Ingles"];
			var pregunta3=["Qué representa el cobre para el Chile globalizado?", "El 1,7% de los ingresos fiscales generales", "El 23% de los ingresos fiscales generales", "El 3,8% de los ingresos fiscales generales", "El 5% de los ingresos fiscales generales", "El 7,7% de los ingresos fiscales generales", "El 17% de los ingresos fiscales generales", "El 1,7% de los ingresos fiscales generales"];
			var pregunta4=["Cual de las siguientes ha apoyado mas a la globalizacion?", "Cultura", "Religion", "Deporte", "Telecomunicaciones", "Transporte", "Musica", "Telecomunicaciones"];
			var pregunta5=["Que es la globalizacion economica?", "La expansion de la venta de globos", "La masificacion de dinero", "Generar dinero a travez de los globos terraqueos", "Es la creación de un mercado mundial que no contemple barreras arancelarias para permitir la libre circulación de capitales", "Una forma de gobierno", "El capitalismo apoderandose del mundo", "Es la creación de un mercado mundial que no contemple barreras arancelarias para permitir la libre circulación de capitales"];
			var pregunta6=["Cual es la empresa automotriz mas grande del mundo?", "Toyota Motor", "Volkswagen Group", "BMW Group", "Ford Motor", "Nissan Motor", "Honda Motor", "Volkswagen Group"];
			var pregunta7=["Cual es la moneda internacional de America?", "Peso Chileno", "Peso Argentino", "Sol", "Bolivar", "Dolar", "Boliviano", "Dolar"];
			var pregunta8=["Como se llama(n) el(las) area(s) de la informatica que ayuda(n) al traspaso de informacion tanto nacional como internacionalmente?", "Area de Arquitectura y Tecnologia de los Computadores", "Area de Ciencias de la Computacion e Inteligencia Artificial", "Area de Ingenieria Telematica", "Area de Lenguajes y Sistemas Informaticos", "Todas las anteriores", "Ninguna de las anteriores", "Area de Ingenieria Telematica"];
			var pregunta9=["Cual es el pais con mayor influencia en el mundo de los paises globalizados?", "Chile", "Rusia", "España", "Inglaterra", "Estados Unidos", "China", "Estados Unidos"];
			var pregunta10=["Cuales son los seectores mas vulnerables de la sociedad chilena?\n I. Mujeres\nII. Niños\nIII. Adolescentes\nIV. Adulto mayor", "I y II", "I y III", "II y III", "II y IV", "I, II y III", "Ninguna de las anteriores", "I y II"];
			var pregunta11=["Que es una empresa multinacional?", "Una empresa creada en un pais que se expande a otros paises y la mayor parte de las ganancias regresan al pais de origen", "Una empresa en la que los accionistas son de distintos paises", "Una empresa que tiene sucursales al rededor de todo el pais", "Una empresa que exporta productos a otros paises", "Una empresa multicultural", "Una empresa que es que extrae materia prima de otros paises para luego vender productos solo en su pais de origen", "Una empresa creada en un pais que se expande a otros paises y la mayor parte de las ganancias regresan al pais de origen"];
			var pregunta12=["Que son los acuerdos bilaterales?", "La union entre dos paises para formar uno", "Declaracion de paz entre dos paises", "Negociacion entre dos empresas nacionales", "Un libro de Truman Capote", "Acuerdo entre dos personas", "Un acuerdo entre dos países para propiciarse mutuamente ciertos beneficios financieros, tributarios, políticos o de otro tipo", "Un acuerdo entre dos países para propiciarse mutuamente ciertos beneficios financieros, tributarios, políticos o de otro tipo"];
			var pregunta13=["En Chile, que region es la que genera mas ingresos?", "Araucania", "Metropolitana", "Valparaiso", "Antofagasta", "Tarapaca", "Atacama", "Metropolitana"];
			var pregunta14=["Cual de las siguientes empresas no es multinacional?", "Adidas", "Nike", "McDonalds", "Acuenta", "Faber Castell", "Telepizza", "Acuenta"];
			var pregunta15=["Que etnias han sido afectadas por la globalizacion en Chile?", "Mapuche", "Aonikenk", "Selknam", "Cuncos", "Inka", "Maya", "Mapuche"];
			var pregunta16=["Cual es el pais con mayor desigualdad economica en America Latina?", "Costa Rica", "Chile", "Argentina", "Guatemala", "Peru", "Bolivia", "Guatemala"];
			var pregunta17=["Cual es la diferencia entre internacionalizacion y globalizacion?", "La internacionalizacion no necesariamente se refiere a la liberacion economica y la regulacion financiera que ha acompañado a la globalizacion", "La forma en que se hacen los acuerdos", "La cantidad de personas que hacen el acuerdo", "Las organizaciones gubernamentales", "Nada", "Todo", "La internacionalizacion no necesariamente se refiere a la liberacion economica y la regulacion financiera que ha acompañado a la globalizacion"];
			var pregunta18=["Que significan las siglas OMC?", "Organizacion Mundial de Comercio", "Organizacion Mundial de Cultura", "Organizacion de Maestros Chilenos", "Organos Martin Cerda", "Organizacion Mundial de Cardiologia", "Todas las anteriores", "Organizacion Mundial de Comercio"];
			var pregunta19=["Cual es el pais con menor desigualdad economica en America Latina?", "Venezuela", "Peru", "Chile", "Argentina", "Guatemala", "Bolivia", "Venezuela"];
			var pregunta20=["Cual es el pais NO democratico que tiene participacion en la globalizacion?", "Rusia", "Corea del Norte", "Chile", "Arabia Saudita", "Argentina", "Colombia", "Arabia Saudita"]; 
        
		    datos = [pregunta1,pregunta2,pregunta3,pregunta4,pregunta5,pregunta6,pregunta7,pregunta8,pregunta9,pregunta10,pregunta11,pregunta12,pregunta13,pregunta14,pregunta15,pregunta16,pregunta17,pregunta18,pregunta19,pregunta20];
       });     
//********************************************************************************
           function clickEnParrafo(){
               indice++;
               if (indice < datos.length){
               clearInterval(interval);
               contador();
               $("#textoPregunta").text(datos[indice][0]);
                    $("#1").text(datos[indice][1]);
                    $("#2").text(datos[indice][2]);
                    $("#3").text(datos[indice][3]);
                    $("#4").text(datos[indice][4]);
                    $("#5").text(datos[indice][5]);
                    $("#6").text(datos[indice][6]);
                    $("#7").text(datos[indice][7]);
                    $("#8").text(datos[indice][8]);
                    $("#9").text(datos[indice][9]);
                    $("#10").text(datos[indice][10]);
                    $("#11").text(datos[indice][11]);
                    $("#12").text(datos[indice][12]);
                    $("#13").text(datos[indice][13]);
                    $("#14").text(datos[indice][14]);
                    $("#15").text(datos[indice][15]);
                    $("#16").text(datos[indice][16]);
                    $("#17").text(datos[indice][17]);
                    $("#18").text(datos[indice][18]);
                    $("#19").text(datos[indice][19]);
                    $("#20").text(datos[indice][20]);
           }
           else{
        $("#pregs").hide();
        $("#resps").hide();
        $("#canvas").hide();
	$("#final").fadeIn(2000);
        $("#puntaje").text(determinaMensaje());
           }
       }
        function determinaResultado(par){
            
            var canvas2 = document.getElementById("canvas2");
            var ctx2 = canvas2.getContext("2d");
            
            if(par===true){
            ctx2.beginPath();
            ctx2.font="30px Comic Sans MS";
            ctx2.fillStyle = "green";
            ctx2.fillText("WOW!",150,50);
            
            ctx2.arc(150,110,10,0,2*Math.PI);
            ctx2.moveTo(260,100);
            ctx2.arc(250,110,10,0,2*Math.PI);
            
             ctx2.moveTo(260,130);
             ctx2.arc(200,130,60,0,Math.PI);
             ctx2.fill();
             
              setTimeout(function(){
                
                canvas2.width=400;
                canvas2.height=200;
                
            },1000);
             
            }
            else{
             ctx2.beginPath();
            ctx2.font="30px Fixedsys";
            ctx2.fillStyle = "red";
            ctx2.fillText("Malo!",150,50);
            
             ctx2.arc(150,110,10,0,2*Math.PI);
            ctx2.moveTo(260,110);
            ctx2.arc(250,110,10,0,2*Math.PI);
            
             ctx2.moveTo(260,180);
             ctx2.arc(200,180,60,0,Math.PI,true);
             ctx2.fill();
            
            setTimeout(function(){
                
                canvas2.width=400;
                canvas2.height=200;
                
            },1000);
              
            }
            
        }
        
        function determinaMensaje(){
            if(score===0)
                return"Obtuviste " + score + "/" +datos.length+ " Puntos. \n Deberias estudiar un poco...";
            if(score < datos.length/2)
                return"Obtuviste " + score + "/" +datos.length+ " Puntos. \n Deberias estudiar un poco...";
            if(score === datos.length/2)
                return"Obtuviste " + score + "/" +datos.length+ " Puntos. \n Ni mal, ni bien";
            if(score < datos.length)
                return"Obtuviste " + score + "/" +datos.length+ " Puntos. \n Bien! ";
            if(score === datos.length)
                return"Obtuviste " + score + "/" +datos.length+ " Puntos. \n Genial!!! :D";
        }
        
//********************************************************************************
           
        </script>
	<link href="img/favicon.png" rel="icon" type="image/png">
</head>
<body id="body">
	<table id="header" class="fologuer2">
		<tr>
			<td><h2>Tiempo</h2><h1 style="text-align:center;" id="timerq">10</h1></td>
		</tr>
	</table>
	<table width="100%" id="header" class="fologuer">
		<tr>
			<td><img style="padding-left:10px;" src="img/escudo.png" width="100px"></td>
			<td><img src="img/logo.png" width="100px"></td>
			<td><a href="index.html"><center><img src="img/Trivia.png"></center></a></td>
			<td><div id="results"><img style="float: right; padding-right:10px;" src="player/user1.png" width="100px"></div></td>
			<td><h2>Jugador: <span id="player">JaviertINC</span><br />Curso: <span id="cursor">4to Prog</span><h2></td>
		</tr>
	</table>
	<br />
	<br />
	<br />
	<br />
	<br />
	<br />
	<br />
	<br />

<div id="register">
<div id="marginrl">
<div id="sidebarcube">
	<div id="padingrl">
	<br />
	<h1 style="text-align:center;">Ingresa tus datos para jugar!</h1>
	<br />
	<div class="txt">
		<table width="100%">
		<tr>
		<td width="30%"><h2 class="allright">¿Cual es tu nombre?:</h2> </td><td width="70%" colspan="2"><input type="text" maxlength="50" id="myid" name="username"  placeholder="Tu Nombre" value="JaviertINC" /></td>
		</tr>
		<tr>
		<td><h2 class="allright" >¿En que curso vas?:</h2> </td><td colspan="2"><input type="text" id="mycur" name="usercurso" placeholder="Tu Curso" value="4to Prog" /></td>
		</tr>
		<tr>
		<td><h2 class="allright" >(Consejo: Elige una buena pose)</h2> </td>
			<td>
			<center>
			<div id="my_camera"><img src="player/user1.png" width="240px" /></div>
			</center>
			</td>
			<td><button class="button2" value="Elegir Foto" onClick="take_snapshot()">Elegir Foto</button>
			<script language="JavaScript">
				Webcam.set({
					width: 320,
					height: 240,
					dest_width: 640,
					dest_height: 480,
					crop_width: 480,
					crop_height: 480,
					image_format: 'jpeg',
					jpeg_quality: 90
				});
				Webcam.attach( '#my_camera' );
			</script>
			<script language="JavaScript">
				function take_snapshot() {
					Webcam.snap( function(data_uri) {
						document.getElementById('results').innerHTML = 
							'<img style="float: right; padding-right:10px;" src="'+data_uri+'" width="100px" />';
					} );
				}
			</script>
		</td>
		</tr>
		</table>
		<hr />
		<div id="tituloPregunta">
			<center><h2 id="textoTitulo" class="playbtn" value="Jugar!" >Jugar!</h2></center>
		</div>
	</div>
	<br />
	</div>
</div>
</div>
</div>
<div id="game">
<div id="pregs">
<div id="marginrl">
<div id="sidebarcube">
	<div id="tituloPregunta">
		</div>
	<div id="padingrl">
	<h2 class="txtcent" id="textoPregunta">Cargando...</h2>
	<div id="resps" class="txt">
		<p class="white playbtn" id="1">Cargando...</p>
		<p class="white playbtn" id="2">Cargando...</p>
		<p class="white playbtn" id="3">Cargando...</p>
		<p class="white playbtn" id="4">Cargando...</p>
		<p class="white playbtn" id="5">Cargando...</p>
		<p class="white playbtn" id="6">Cargando...</p>
	</div>
<canvas id="canvas" width="1000" height="20" style="margin: 60px;" ></canvas>
	</div>
</div>
<br />
<center>
<canvas id="canvas" width="1000" height="20" style="margin: 60px;" ></canvas>
<canvas id="canvas2" width="400" height="200"></canvas>
</center>
</div>
</div>
</div>
<div id="final">
	<div id="marginrl">
		<div id="sidebarcube">
			<br />
			<br />
			<h1 class="txtcent">Puntos!</h1>
			<br />
			<h1 id="puntaje" class="txtcent"></h1>
			<br />
			<br />
			<br />
		</div>
	</div>
</div>
            <script>
                canvas = document.getElementById("canvas");
                ctx = canvas.getContext("2d");
                function contador(){
                    var pos=0;
                  interval =  setInterval(function(){ 
                    ctx.fillStyle="green";
                    ctx.clearRect(0,0,1000,20);
                    ctx.fillRect(pos,0,1000,20);
                    pos++;
                    if(pos>1000){
                        
                        clearInterval(interval);
                        determinaResultado(false);
                        setTimeout(function(){
                        
        clickEnParrafo();
                        },1000);
                        
                    }
                        
                },10);
                   
                }
                </script>
</body>
</html>
